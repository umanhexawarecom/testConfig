{
  "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "workspaceName": {
      "type": "string",
      "metadata": {
        "description": "Workspace name"
      },
      "defaultValue": "lineagempg"
    },
    "linkedServiceName": {
      "type": "string",
      "metadata": {
        "description": "Name of the linked service"
      }
    }
  },
  "variables": {
    "workspaceId": "[concat('Microsoft.Synapse/workspaces/', parameters('workspaceName'))]"
  },
  "resources": [
    {
      "name": "[concat(parameters('workspaceName'), '/TeamsAlertPipe')]",
      "type": "Microsoft.Synapse/workspaces/pipelines",
      "apiVersion": "2019-06-01-preview",
      "properties": {
        "activities": [
          {
            "name": "TeamsAlert",
            "type": "AzureFunctionActivity",
            "dependsOn": [],
            "policy": {
              "timeout": "PT12H",
              "retry": 0,
              "retryIntervalInSeconds": 30,
              "secureOutput": false,
              "secureInput": false
            },
            "userProperties": [],
            "typeProperties": {
              "functionName": "funcDeployment",
              "body": {
                "value": "Post",
                "type": "Expression"
              },
              "headers": {},
              "method": "POST"
            },
            "linkedServiceName": {
              "referenceName": "[parameters('linkedServiceName')]",
              "type": "LinkedServiceReference"
            }
          }
        ],
        "policy": {
          "elapsedTimeMetric": {}
        },
        "annotations": []
      },
      "dependsOn": []
    }
  ]
}
